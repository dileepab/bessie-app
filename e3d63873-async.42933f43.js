(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["e3d63873"],{e3d63873:function(e,a,s){s.d(a,"__esModule",{value:!0}),s.e(a,{default:function(){return T;}});var t=s("777fffbe"),o=s("852bbaa9"),l=s("9119baee"),r=s("e242b6c1"),i=s("69e98751"),n=s("0b688f69"),d=t._(n),g=s("91a539d5"),c=o._(g),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},f=s("99a57ce3"),m=t._(f),h=c.forwardRef(function(e,a){return c.createElement(m.default,(0,d.default)((0,d.default)({},e),{},{ref:a,icon:u}));}),p=s("9a879fc8"),x=t._(p),b=s("b12afb35"),M=s("e666ce55"),v=t._(M),j=s("5aeca149"),y=t._(j),w=s("d2d88512"),A=s("c208248b"),_=t._(A),S=s("086d74b9"),L=t._(S),k=s("811baa03"),F=s("65b35f28"),z=s("14b2e703"),P=t._(z);let B=(0,k.createStyles)(({token:e})=>({action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:e.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:e.borderRadius,":hover":{backgroundColor:e.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}})),H=()=>{let{styles:e}=B();return(0,l.jsx)("div",{className:e.lang,"data-lang":!0,children:w.SelectLang&&(0,l.jsx)(w.SelectLang,{})});},I=({content:e})=>(0,l.jsx)(_.default,{style:{marginBottom:24},message:e,type:"error",showIcon:!0}),T=()=>{let[e,a]=(0,c.useState)({}),{initialState:s,setInitialState:t}=(0,w.useModel)("@@initialState"),{styles:o}=B(),n=(0,w.useIntl)(),d=async()=>{var e;let a=await (null==s?void 0:null===(e=s.fetchUserInfo)||void 0===e?void 0:e.call(s));a&&(0,F.flushSync)(()=>{t(e=>({...e,currentUser:a}));});},g=async e=>{try{let s=await (0,i.login)({...e});if("ok"===s.status){let e=n.formatMessage({id:"pages.login.success",defaultMessage:"Login successful"});L.default.success(e),await d();let a=new URL(window.location.href).searchParams;w.history.push(a.get("redirect")||"/");return;}console.log(s),a(s);}catch(a){let e=n.formatMessage({id:"pages.login.failure",defaultMessage:"Login failed"});console.log(a),L.default.error(e);}},{status:u,type:f}=e;return(0,l.jsxs)("div",{className:o.container,children:[(0,l.jsx)(w.Helmet,{children:(0,l.jsxs)("title",{children:[n.formatMessage({id:"menu.login",defaultMessage:"Login"}),P.default.title&&` - ${P.default.title}`]})}),(0,l.jsx)(H,{}),(0,l.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,l.jsxs)(b.LoginForm,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,l.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"BESSIE",subTitle:n.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:async e=>{await g(e);},children:["error"===u&&"account"===f&&(0,l.jsx)(I,{content:n.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"Incorrect username/password(admin/ant.design)"})}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.default,{name:"username",fieldProps:{size:"large",prefix:(0,l.jsx)(x.default,{})},placeholder:n.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,l.jsx)(w.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,l.jsx)(y.default.Password,{name:"password",fieldProps:{size:"large",prefix:(0,l.jsx)(h,{})},placeholder:n.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,l.jsx)(w.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),(0,l.jsxs)("div",{style:{marginBottom:24},children:[(0,l.jsx)(v.default,{noStyle:!0,name:"autoLogin",children:(0,l.jsx)(w.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"Remember me"})}),(0,l.jsx)("a",{style:{float:"right"},children:(0,l.jsx)(w.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"Forgot Password?"})})]})]})}),(0,l.jsx)(r.Footer,{})]});};}}]);
//# sourceMappingURL=e3d63873-async.42933f43.js.map